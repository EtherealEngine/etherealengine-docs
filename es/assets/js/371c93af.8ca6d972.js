"use strict";(self.webpackChunk_etherealengine_docs=self.webpackChunk_etherealengine_docs||[]).push([[5964],{9338:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=i(4848),s=i(8453);const o={},r="GitHub Actions",l={id:"manual/modules/infrastructure/devopsDeployment/AWSSetup/githubActions",title:"GitHub Actions",description:"Kick off GitHub Actions",source:"@site/docs/manual/03_modules/05_infrastructure/03_devopsDeployment/03_AWSSetup/16_githubActions.md",sourceDirName:"manual/03_modules/05_infrastructure/03_devopsDeployment/03_AWSSetup",slug:"/manual/modules/infrastructure/devopsDeployment/AWSSetup/githubActions",permalink:"/etherealengine-docs/es/manual/modules/infrastructure/devopsDeployment/AWSSetup/githubActions",draft:!1,unlisted:!1,editUrl:"https://github.com/EtherealEngine/etherealengine-docs/blob/master/docs/manual/03_modules/05_infrastructure/03_devopsDeployment/03_AWSSetup/16_githubActions.md",tags:[],version:"current",sidebarPosition:16,frontMatter:{},sidebar:"manual",previous:{title:"EKS Deploy",permalink:"/etherealengine-docs/es/manual/modules/infrastructure/devopsDeployment/AWSSetup/EKSDeploy"},next:{title:"Elastic Search & Kibana",permalink:"/etherealengine-docs/es/manual/modules/infrastructure/devopsDeployment/AWSSetup/elasticKibana"}},a={},c=[{value:"Kick off GitHub Actions",id:"kick-off-github-actions",level:2},{value:"Overview of the build process",id:"overview-of-the-build-process",level:3}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,n.jsx)(t.h2,{id:"kick-off-github-actions",children:"Kick off GitHub Actions"}),"\n",(0,n.jsxs)(t.p,{children:["In GitHub, if you go to back to the Actions tab, you should see a ",(0,n.jsx)(t.code,{children:"dev-deploy"})," action. Click on it, and you should see\na page showing its status, which should be all green checkmarks or indicators that things didn't run. In the upper\nright, click ",(0,n.jsx)(t.code,{children:"Re-run all jobs"}),". This will start it again, and now that ",(0,n.jsx)(t.code,{children:"DEPLOYMENTS_ENABLED"})," is set to true, it should\nattempt to build and deploy the builder."]}),"\n",(0,n.jsx)(t.p,{children:"(If actions were disabled at first, you'll have to merge additional code into the dev branch to get it to start the dev-deploy process)"}),"\n",(0,n.jsx)(t.h3,{id:"overview-of-the-build-process",children:"Overview of the build process"}),"\n",(0,n.jsx)(t.p,{children:"The full build and deployment process works like this:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"GitHub Actions builds just enough of the iR Engine monorepo to fetch any installed iR Engine projects."}),"\n",(0,n.jsxs)(t.li,{children:["GitHub Actions pushes this builder Docker image to the repo ",(0,n.jsx)(t.code,{children:"etherealengine-<release>-builder"})," in ECR"]}),"\n",(0,n.jsx)(t.li,{children:"GitHub Actions updates the builder deployment to point to the builder image it just created."}),"\n",(0,n.jsx)(t.li,{children:"The builder deployment spins up the builder Docker image on its single node"}),"\n",(0,n.jsxs)(t.li,{children:["The builder connects to the deployment's database and checks if there is a table ",(0,n.jsx)(t.code,{children:"user"}),". This is a proxy\nfor the database being seeded; if it does not exist, it seeds the database with the basic iR Engine schema,\nseeds the default project into the database and storage provider, and seeds various types."]}),"\n",(0,n.jsx)(t.li,{children:"The builder downloads any iR Engine projects that the deployment has added."}),"\n",(0,n.jsx)(t.li,{children:"The builder builds the Docker image for each service concurrently using these projects, building them into the client files as well as copying them so that the api and instanceservers have access to them.\nIf serving client files from the Storage Provider, the client files will be pushed to S3"}),"\n",(0,n.jsxs)(t.li,{children:["The builder pushes these final Docker images to the repos ",(0,n.jsx)(t.code,{children:"etherealengine-<release>-<service>"})," in ECR (not the client image if serving client files from the Storage Provider)"]}),"\n",(0,n.jsx)(t.li,{children:"The builder caches all of the layers of each Docker file in S3 for faster build times on subsequent builds"}),"\n",(0,n.jsx)(t.li,{children:"The builder updates the main deployment to point to the final images it just created."}),"\n",(0,n.jsx)(t.li,{children:"The main deployment spins up the final Docker images for the api, client (optional), instanceserver and taskserver services."}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>l});var n=i(6540);const s={},o=n.createContext(s);function r(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);