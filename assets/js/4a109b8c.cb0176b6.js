"use strict";(self.webpackChunk_etherealengine_docs=self.webpackChunk_etherealengine_docs||[]).push([[943],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8960:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={},i="Projects",l={unversionedId:"creator/development/projects_overview",id:"creator/development/projects_overview",title:"Projects",description:"Projects are folders that contain all your custom code, assets and scenes. They",source:"@site/docs/2_creator/4_development/0_projects_overview.md",sourceDirName:"2_creator/4_development",slug:"/creator/development/projects_overview",permalink:"/etherealengine-docs/docs/creator/development/projects_overview",draft:!1,editUrl:"https://github.com/EtherealEngine/etherealengine-docs/blob/master/docs/2_creator/4_development/0_projects_overview.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Development",permalink:"/etherealengine-docs/docs/creator/development/"},next:{title:"State Management",permalink:"/etherealengine-docs/docs/creator/development/state_management"}},s={},p=[{value:"File Structure",id:"file-structure",level:2},{value:"Config",id:"config",level:2},{value:"Hooks",id:"hooks",level:3},{value:"Thumbnail",id:"thumbnail",level:3},{value:"Routes",id:"routes",level:3},{value:"Webapp Injection",id:"webapp-injection",level:3},{value:"World Injection",id:"world-injection",level:3},{value:"Services",id:"services",level:3},{value:"Database Seeding",id:"database-seeding",level:3},{value:"i18n",id:"i18n",level:3}],c={toc:p},d="wrapper";function u(e){let{components:t,...o}=e;return(0,r.kt)(d,(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"projects"},"Projects"),(0,r.kt)("p",null,"Projects are folders that contain all your custom code, assets and scenes. They\nare version controlled using git & github, and can be installed to any deployment\nwith a single click. (more on that in the ",(0,r.kt)("a",{parentName:"p",href:"./3_editor_scenes_locations.md"},"next chapter"),")"),(0,r.kt)("p",null,"Pictured below is an example of 4 projects installed. By default, only the\n",(0,r.kt)("inlineCode",{parentName:"p"},"default-project")," is installed, which in a production environment is read only.\nYou can find the default project under ",(0,r.kt)("inlineCode",{parentName:"p"},"/packages/projects/default-project/")),(0,r.kt)("p",null,"In a production environment, the builder process will install all projects\naccording to the ",(0,r.kt)("inlineCode",{parentName:"p"},"project")," database table and will download files from the\nstorage provider. In a local development environment, the local file system is\nalways the source of truth. Any project folders added or removed from the file\nsystem will be automatically added or removed from the database. This is to\nensure there is no accidental loss of data, as these project folders are all git\nrepositories."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(8098).Z,width:"263",height:"241"})),(0,r.kt)("h2",{id:"file-structure"},"File Structure"),(0,r.kt)("p",null,"Projects have a few conventions."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"assets/")," is where files uploaded from the editor will be uploaded to")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"src/")," is where code assets can be served from")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"tests/")," is where test files can be run")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"sceneName.scene.json")," is a scene file")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"sceneName.thumbnail.png")," is an auto-generated scene thumbnail file")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"xrengine.config.ts")," the project configuration, where client routes, database\nmodels, feathers services and the project thumbnail can be defined"))),(0,r.kt)("p",null,"A project must also have a package.json to provide custom dependencies, and to define\nthe project name, project version, and Ethereal Engine version it is known to work with."),(0,r.kt)("p",null,"Systems imported from a scene MUST have their filename end with ",(0,r.kt)("inlineCode",{parentName:"p"},"System.ts")," and be in the ",(0,r.kt)("inlineCode",{parentName:"p"},"/src/systems")," folder.\nThis is to optimize vite's code-splitting bundling process, as each potentially dynamically\nimportable file will result in a new bundle with it's own copy of all of it's import dependencies."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"@etherealengine/*")," monorepo dependencies will be symlinked and not needed, but some\npackage managers (such as pnpm) require these to be defined. If so, they should\nbe defined in ",(0,r.kt)("inlineCode",{parentName:"p"},"peerDependencies")," and kept up to date with the current engine version."),(0,r.kt)("h2",{id:"config"},"Config"),(0,r.kt)("p",null,"The ethereal engine config file has the following options:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"export interface ProjectConfigInterface {\n  onEvent?: string\n  thumbnail?: string\n  routes?: {\n    [route: string]: {\n      component: () => Promise<{ default: (props: any) => JSX.Element }>\n      props?: {\n        [x: string]: any\n        exact?: boolean\n      }\n    }\n  }\n  webappInjection?: () => Promise<{ default: (props: any) => void | JSX.Element }>\n  worldInjection?: () => Promise<{ default: () => Promise<void> }>\n  services?: string\n  databaseSeed?: string\n  settings?: Array<ProjectSettingSchema>\n}\n")),(0,r.kt)("h3",{id:"hooks"},"Hooks"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"onEvent")," property is a relative path string that points to a file which\nmust expose an object with properties as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"export interface ProjectEventHooks {\n  onInstall?: (app: Application) => Promise<any>\n  onLoad?: (app: Application) => Promise<any>\n  onUpdate?: (app: Application) => Promise<any>\n  onUninstall?: (app: Application) => Promise<any>\n  /**\n   * get oEmbed for active routes that match URL\n   * return that project's onOEmbedRequest()\n   * if null, return default\n   */\n  onOEmbedRequest?: (app: Application, url: URL, currentOEmbed: OEmbed) => Promise<OEmbed | null>\n}\n")),(0,r.kt)("p",null,"These functions are called when the project they belong to are installed,\nupdated (such as scenes saved) or uninstalled respectively. This is used in the\ndefault ethereal engine project to install the default avatars.\nSee ",(0,r.kt)("inlineCode",{parentName:"p"},"/packages/projects/default-project/projectEventHooks.ts"),"."),(0,r.kt)("h3",{id:"thumbnail"},"Thumbnail"),(0,r.kt)("p",null,"This is a URL to a thumbnail for the project."),(0,r.kt)("h3",{id:"routes"},"Routes"),(0,r.kt)("p",null,"Routes enable users to customise the various URL paths of their website\nutilising dynamic loading of modules. The key of each object represents the path\n(with leading forward slash included) while the value represents a react\ncomponent object which gets wrapped in ",(0,r.kt)("inlineCode",{parentName:"p"},"React.lazy()")," and a props object which\npasses options into the react-dom-router Route component corresponding to the route."),(0,r.kt)("h3",{id:"webapp-injection"},"Webapp Injection"),(0,r.kt)("p",null,"Webapp injection allows logic to be run on all pages, loaded before any routes\nare loaded. This will soon be extended to allow easy stylesheet injection and\nother configurables of the webapp."),(0,r.kt)("h3",{id:"world-injection"},"World Injection"),(0,r.kt)("p",null,"World injection allows logic to be run every time a new world is created,\ncurrently only when the engine is initialised. This is loaded on all instances\nof the engine, such as a location and the editor. An example use case of this\nwould be registering custom scene loader and editor prefabs."),(0,r.kt)("h3",{id:"services"},"Services"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"services")," property is a relative path that points to a file which must\nreturn type ",(0,r.kt)("inlineCode",{parentName:"p"},"((app: Application) => Promise<any>)[]")," which is run on all\ninstanceservers and api servers at startup. This allows users to expose custom\nFeathers services, or whatever other functionality they made need."),(0,r.kt)("h3",{id:"database-seeding"},"Database Seeding"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"databaseSeed")," property is a relative path that points to a file which must\nreturn type ",(0,r.kt)("inlineCode",{parentName:"p"},"ServicesSeedConfig")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"../packages/common/src/interfaces/ServicesSeedConfig.ts"),"\nwhich is run when the database seeder is run."),(0,r.kt)("h3",{id:"i18n"},"i18n"),(0,r.kt)("p",null,"Internationalization can be added using the pattern ",(0,r.kt)("inlineCode",{parentName:"p"},"./i18n/<language>/<namespace>.json"),". An example of the format can be found in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/etherealengine/etherealengine/tree/dev/packages/client-core/i18n"},"the base i18n files"),"."))}u.isMDXComponent=!0},8098:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/projects-folder-b0a16be5a64322e12f81233c0a19f898.png"}}]);